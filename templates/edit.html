<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.6
Version: 4.5.5
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
{% load static %}
<head>
    <meta charset="utf-8"/>
    <title>Edit</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/css/components.min.css' %}" rel="stylesheet" id="style_components"
          type="text/css"/>
    <link href="{% static 'assets/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/layouts/layout/css/layout.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/layouts/layout/css/themes/darkblue.min.css' %}" rel="stylesheet" type="text/css"
          id="style_color"/>
    <link href="{% static 'assets/layouts/layout/css/custom.min.css' %}" rel="stylesheet" type="text/css"/>

    <link href="{% static 'assets/global/plugins/bootstrap-colorpicker/css/colorpicker.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/jquery-minicolors/jquery.minicolors.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/jquery-multi-select/css/multi-select.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet"
          type="text/css"/>
    {#    font picker#}
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/github.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/custom/jquery.fontselect.css' %}">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
        .ui-tooltip, .arrow:after {
            background: black;
            border: 2px solid white;
        }

        .ui-tooltip {
            padding: 10px 20px;
            color: white;
            border-radius: 20px;
            font: bold 14px "Helvetica Neue", Sans-Serif;
            text-transform: uppercase;
            box-shadow: 0 0 7px black;
        }

        .arrow {
            width: 70px;
            height: 16px;
            overflow: hidden;
            position: absolute;
            left: 50%;
            margin-left: -35px;
            bottom: -16px;
        }

        .arrow.top {
            top: -16px;
            bottom: auto;
        }

        .arrow.left {
            left: 20%;
        }

        .arrow:after {
            content: "";
            position: absolute;
            left: 20px;
            top: -20px;
            width: 25px;
            height: 25px;
            box-shadow: 6px 5px 9px -9px black;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        .arrow.top:after {
            bottom: -20px;
            top: auto;
        }

        table {
            width: 100%;
        }

        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
        }

        .content {
            width: 793.41px;
            height: 1122.1px;
        }

        .component {
            position: absolute;
            border: 1px dotted black;
            cursor: move;
        }

        .editable {
            cursor: auto;
        }

        .table-component {
            display: inline-block;
            border: none;
        }

        .image-component {
            display: inline-block;
        }

        .text-component {
            position: absolute;
            width: 100px;
            height: 50px;
        }

        .header {
            width: 793.41px;
            height: 100px;
        }

        .footer {
            bottom: 0;
            width: 793.41px;
            height: 100px;
        }

        .ToDelete {
            border: 1px solid red;
        }
    </style>
</head>
<!-- END HEAD -->
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<!-- BEGIN HEADER -->
<!-- END HEADER -->
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- BEGIN PAGE HEADER-->
            <!-- BEGIN PAGE BAR -->
            <div class="page-bar">
                <ul class="page-breadcrumb margin-right-10">
                    <li>
                        <a href="/report" class="color-blue"><i class="fa fa-home font-dark"></i></a>
                        <i class="fa fa-circle"></i>
                    </li>
                    <li>
                        <span>
                            {% if style == "addressList" or style == "telList" or style == "cityList" or style == "occupationList" %}
                                Contacts
                            {% elif style == "taskCategoryList" or style == "taskOwnerList" %}
                                Tasks
                            {% elif style == "phoneList" or style == "staff_addressList" %}
                                Staffs
                            {% endif %}</span>
                        <i class="fa fa-circle"></i>
                    </li>
                    <li>
                        <span href="#">
                            {% if style == "addressList" %}
                                Address List
                            {% elif style == "telList" %}
                                Tel List
                            {% elif style == "cityList" %}
                                City List
                            {% elif style == "occupationList" %}
                                Occupation List
                            {% elif style == "taskCategoryList" %}
                                Task category List
                            {% elif style == "taskOwnerList" %}
                                Tasl owner List
                            {% elif style == "phoneList" %}
                                Staff phone number List
                            {% elif style == "staff_addressList" %}
                                Staff Address List
                            {% endif %}
                        </span>
                        <i class="fa fa-circle"></i>
                    </li>
                    <li>
                        <span>{{ name }}</span>
                    </li>
                </ul>
                <div class="page-toolbar">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default" id="btn-refresh">
                            <i class="fa fa-refresh"></i> Refresh
                        </button>
                        <button type="button" class="btn btn-default" id="btn-prev">
                            <i class="fa fa-play"></i> Preview
                        </button>
                        <button type="button" class="btn btn-default" id="btn-save">
                            <i class="fa fa-save"></i> Save
                        </button>
                        <button type="button" class="btn btn-default" id="btn-download">
                            <i class="fa fa-download"></i> Download
                        </button>
                    </div>
                </div>
            </div>
            <!-- END PAGE BAR -->
            <div class="row">
                <div class="col-xs-1 col-md-1 margin-top-10">
                    <a href="javascript:onPlace(1);" class="icon-btn" title="Header">
                        <i class="fa fa-file-o"></i>
                        <div> Header</div>
                    </a>
                    <a href="javascript:onPlace(2);" class="icon-btn" data-toggle="tooltip" data-placement="right"
                       title="Footer">
                        <i class="fa fa-file-o"></i>
                        <div> Footer</div>
                    </a>
                    <a href="javascript:onPlace(3);" class="icon-btn" data-toggle="tooltip" data-placement="right"
                       title="Simple">
                        <i class="fa fa-font"></i>
                        <div> Text</div>
                    </a>
                    <a href="javascript:onPlace(4);" class="icon-btn" data-toggle="tooltip" data-placement="right"
                       title="Image">
                        <i class="fa fa-image"></i>
                        <div> Image</div>
                    </a>
                    <a href="javascript:onPlace(5);" class="icon-btn" data-toggle="tooltip" data-placement="right"
                       title="Table">
                        <i class="fa fa-table"></i>
                        <div> Table</div>
                    </a>
                    <a href="javascript:onPlace(6);" class="icon-btn" data-toggle="tooltip" data-placement="right"
                       title="Horizontal Line">
                        ‚îÅ
                        <div> Line</div>
                    </a>
                </div>
                <div class="col-xs-8 col-md-8 margin-top-10">
                    <div class="content bg-white">
                    </div>
                </div>
                <div class="col-xs-3 col-md-3 bg-white" style="height:150vh; position: fixed; right: 0;">
                    <div class="portlet-body form" id="header-panel">
                        <div class="form-body">
                            <h3 class="text-info">Header Panel</h3>
                            <hr>
                            <div class="form-group form-md-line-input">
                                <input type="number" class="form-control" id="header-height"
                                       placeholder="Type the value" min="0">
                                <label for="header-height">Height (px)</label>
                                <span class="help-block">Type the header height(number)...</span>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input type="color" class="form-control" id="header-background"
                                       placeholder="Type the value">
                                <label for="form_control_1">Background</label>
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body form" id="footer-panel">
                        <div class="form-body">
                            <h3 class="text-info">Footer Panel</h3>
                            <hr>
                            <div class="form-group form-md-line-input">
                                <input type="number" class="form-control" id="footer-height"
                                       placeholder="Type the value" min="0">
                                <label for="footer-height">Footer (px)</label>
                                <span class="help-block">Type the header height(number)...</span>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input type="color" class="form-control" id="footer-background"
                                       placeholder="Type the value">
                                <label for="form_control_1">Background</label>
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body form" id="text-panel">
                        <div class="form-body">
                            <h3 class="text-info">Text Panel</h3>
                            <hr>
                            <div class="form-group form-md-line-input has-error">
                                <input type="text" class="form-control" id="text-variable"
                                       placeholder="Type the value" min="0">
                                <label for="form_control_1">Variable</label>
                                <span class="help-block">Some help goes here...</span>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group form-md-line-input">
                                        <input type="number" class="form-control" id="text-position-x"
                                               placeholder="Type the value" min="0">
                                        <label for="text-position-x">Position X</label>
                                        <span class="help-block">Some help goes here...</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group form-md-line-input">
                                        <input type="number" class="form-control" id="text-position-y"
                                               placeholder="Type the value" min="0">
                                        <label for="text-position-y">Position Y</label>
                                        <span class="help-block">Some help goes here...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input">
                            <label class="col-md-4 control-label" for="text-style">Style :</label>
                            <div class="col-md-8">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default" id="text-bold">
                                        <i class=" fa fa-bold"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" id="text-italic">
                                        <i class="fa fa-italic"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" id="text-underline">
                                        <i class="fa fa-underline"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" id="text-stright">
                                        <i class="fa fa-strikethrough"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input">
                            <label class="col-md-4 control-label" for="form_control_1">Alignment :</label>
                            <div class="col-md-8">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default"
                                            id="text-align-center">
                                        <i class=" fa fa-align-center"></i>
                                    </button>
                                    <button type="button" class="btn btn-default"
                                            id="text-align-justify">
                                        <i class="fa fa-align-justify"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" id="text-align-left">
                                        <i class="fa fa-align-left"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" id="text-align-right">
                                        <i class="fa fa-align-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="form-group form-md-line-input">
                            <label class="col-md-4 control-label" for="text-color">Color:</label>
                            <div class="col-md-8">
                                <input type="color" class="form-control"
                                       placeholder="Type the value" id="text-color">
                            </div>
                        </div>
                        <div class="form-group form-md-line-input">
                            <label class="col-md-4 control-label" for="form_control_1">Family :</label>
                            <input id="text-font" type="text" value="Caudex"/>
                        </div>
                        <div class="form-group form-md-line-input">
                            <label class="col-md-4 control-label" for="form_control_1">Font Size:</label>
                            <div class="col-md-8">
                                <select class="form-control" id="text-font-size">
                                    <option>---Choose the font size</option>
                                    <option value="6pt">6 pt</option>
                                    <option value="8pt">8 pt</option>
                                    <option value="10pt">10 pt</option>
                                    <option value="12pt">12 pt</option>
                                    <option value="14pt">14 pt</option>
                                    <option value="16pt">16 pt</option>
                                    <option value="18pt">18 pt</option>
                                    <option value="20pt">20 pt</option>
                                    <option value="22pt">22 pt</option>
                                    <option value="24pt">24 pt</option>
                                    <option value="32pt">32 pt</option>
                                    <option value="48pt">48 pt</option>
                                    <option value="64pt">64 pt</option>
                                    <option value="70pt">70 pt</option>
                                </select>
                                <div class="form-control-focus"></div>
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body form" id="image-panel">
                        <div class="form-body">
                            <h3 class="text-info">Image Panel</h3>
                            <hr>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group form-md-line-input">
                                        <input type="number" class="form-control" id="image-position-x"
                                               placeholder="Type the value" min="0">
                                        <label for="image-position-x">Position X</label>
                                        <span class="help-block">Some help goes here...</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group form-md-line-input">
                                        <input type="number" class="form-control" id="image-position-y"
                                               placeholder="Type the value" min="0">
                                        <label for="image-position-y">Position Y</label>
                                        <span class="help-block">Some help goes here...</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input type="file" class="form-control" id="image-src"
                                       placeholder="Type the value" min="0">
                                <label for="image-src">Image:</label>
                                <span class="help-block">Some help goes here...</span>
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body form" id="line-horizontal-panel">
                        <div class="form-body">
                            <h3 class="text-info">Horizontal Panel</h3>
                            <hr>
                            <div class="form-group form-md-line-input">
                                <input type="number" class="form-control" id="line-height"
                                       placeholder="Type the value" min="0">
                                <label for="header-height">Height (px)</label>
                                <span class="help-block">Type the header height(number)...</span>
                            </div>
                            <div class="form-group form-md-line-input">
                                <select class="form-control" id="line-style">
                                    <option value="solid">Solid</option>
                                    <option value="dotted">Dotted</option>
                                    <option value="double">Double</option>
                                    <option value="dashed">Dashed</option>
                                </select>
                                <label for="form_control_1">Style</label>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input type="color" class="form-control" id="line-background"
                                       placeholder="Type the value">
                                <label for="form_control_1">Background</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="table-edit" tabindex="-1" role="save" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Table Edit</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label class="control-label col-md-3 text-center">You can make the table field.</label>
                    <div class="col-md-9">
                        <select multiple="multiple" class="multi-select text-center"
                                id="my_multi_select1"
                                name="my_multi_select1[]">
                            <option value="first_name">First Name</option>
                            <option value="middle_name">Middle Name</option>
                            <option value="last_name">Last name</option>
                            <option value="title">Title</option>
                            <option value="gender">Gender</option>
                            <option value="company_name">Company name</option>
                            <option value="email">Email</option>
                            <option value="phone_number">Phone number</option>
                            <option value="skype">SKype</option>
                            <option value="contact_type">Contact Type</option>
                            <option value="birthday">Birthday</option>
                            <option value="birthday_location">Birth Location</option>
                            <option value="blood_group">Blood Group</option>
                            <option value="material_status">Matrial Status</option>
                            <option value="user_id">User Id</option>
                            <option value="latitude">Latitude</option>
                            <option value="longtitude">Longtitude</option>
                            <option value="contact_id">Contact Id</option>
                            <option value="provider_type">Provider Type</option>
                            <option value="user_role">User Role</option>
                            <option value="opt">OPT</option>
                            <option value="support_need">Support Need</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-10 col-md-offset-1" id="table-display">
                        <table class="table table-bordered table-striped">
                            <thead>
                            <th class="text-center">No</th>
                            <th class="text-center">Name</th>
                            <th class="text-center">Email</th>
                            </thead>
                            <tbody>
                            <tr class="text-center">
                                <td colspan="3">Database data will be shown in here</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
                <button type="button" class="btn green btn-outline" id="confirm">Confirm</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal fade" id="error" tabindex="-1" role="save" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Error</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label class="control-label col-md-12 text-center">Double header or footer</label>
                </div>
                <div class="row">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal fade" id="error-image" tabindex="-1" role="save" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Error</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label class="control-label col-md-12 text-center">Please choose the image component</label>
                </div>
                <div class="row">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="save" tabindex="-1" role="save" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Saved</h4>
            </div>
            <div class="modal-body">Template is saved!</div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<input id="templateId" value="{{ templateId }}" type="hidden" name="templateId"/>

<!-- END CONTAINER -->
<!--[if lt IE 9]>
<script src="{% static 'assets/global/plugins/respond.min.js' %}"></script>
<script src="{% static 'assets/global/plugins/excanvas.min.js' %}"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}"
        type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="{% static 'assets/global/scripts/app.min.js' %}" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="{% static 'assets/layouts/layout/scripts/layout.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/layout/scripts/demo.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/global/scripts/quick-sidebar.min.js' %}" type="text/javascript"></script>

<script src="{% static 'assets/global/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-minicolors/jquery.minicolors.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/pages/scripts/components-color-pickers.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/pages/scripts/components-multi-select.min.js' %}" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<!-- or -->
<script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="{% static 'assets/custom/jquery.fontselect.js' %}"></script>
<script src="{% static 'assets/custom/jquery.editable.js' %}" type="text/javascript"></script>
<script>
    var templateData = [];
    control();

    // click the compoment button
    function onPlace(index) {
        changePannel(index);
        addComponent(index);
    }

    $('#header-panel').hide();
    $('#footer-panel').hide();
    $('#text-panel').hide();
    $('#image-panel').hide();
    $('#line-horizontal-panel').hide();

    // right sidebar change pannel
    function changePannel(index) {
        switch (index) {
            case 1:
                $('#header-panel').show();
                $('#footer-panel').hide();
                $('#text-panel').hide();
                $('#image-panel').hide();
                $('#line-horizontal-panel').hide();
                break;
            case 2:
                $('#header-panel').hide();
                $('#footer-panel').show();
                $('#text-panel').hide();
                $('#image-panel').hide();
                $('#line-horizontal-panel').hide();
                break;
            case 3:
                $('#header-panel').hide();
                $('#footer-panel').hide();
                $('#text-panel').show();
                $('#image-panel').hide();
                $('#line-horizontal-panel').hide();
                break;
            case 4:
                $('#header-panel').hide();
                $('#footer-panel').hide();
                $('#text-panel').hide();
                $('#image-panel').show();
                $('#line-horizontal-panel').hide();
                break;
            case 5:
            {#$('#table-edit').modal({});#}
                break;
            case 6:  // horizontal line
                $('#header-panel').hide();
                $('#footer-panel').hide();
                $('#text-panel').hide();
                $('#image-panel').hide();
                $('#line-horizontal-panel').show();
                break;
            case 7:  // vertical line
                $('#header-panel').hide();
                $('#footer-panel').hide();
                $('#text-panel').hide();
                $('#image-panel').hide();
                $('#line-horizontal-panel').hide();
                break;
            default:
                $('#header-panel').hide();
                $('#footer-panel').hide();
                $('#text-panel').hide();
                $('#image-panel').hide();
                $('#line-horizontal-panel').hide();
                break;
        }
    }

    // send the data
    var _table_headerlist = [];
    var headerFlag = false;
    var footerFlag = false;
    var focusId = "";

    $('#text-font').fontselect({
        systemFonts: false,
        placeholderSearch: 'Type to search...',
        lookahead: 4
    }).on('change', function () {
        var font = this.value;
        font = font.replace(/\+/g, ' ');
        // Split font into family and weight
        font = font.split(':');
        var fontFamily = font[0];
        var fontWeight = font[1] || 400;
        if (focusId != "") {
            $("#" + focusId + ">div").css({fontFamily: "'" + fontFamily + "'", fontWeight: fontWeight});
        }
    });
    $('#my_multi_select1').on('change', function () {
        var selectedArray = $(this).val();
        tableHeaderList = selectedArray;
        if (selectedArray == null) {
            tableHeaderList = [];
        }
        reDrawtable(tableHeaderList);
        _table_headerlist = tableHeaderList;
    })

    function reDrawtable(headerList) {
        $('#table-display').empty();
        var template = '<table class="table table-bordered table-striped"><thead><th class="text-center">No</th>';
        headerList.forEach(function (item) {
            template += '<th class="text-center">' + item + '</th>';
        })
        template += '</thead>' +
            '<tbody>' +
            '<tr class="text-center">' +
            '    <td colspan="' + (headerList.length + 1) + '"> Database data will be shown in here</td></tr></tbody></table>';
        $('#table-display').append(template);
    }

    // add the compoment to the main content div
    function addComponent(index) {
        switch (index) {
            case 1:
                if (headerFlag == false) {
                    var date = new Date();
                    var _id = date.getTime();
                    var template = '<div class="component header" data-role="header" id="' + _id + '"></div>';
                    $('.content').append(template);
                    var _data = {
                        "title": "Header",
                        "id": _id
                    }
                    templateData.push(_data);
                    headerFlag = true
                } else {
                    $('#error').modal({});
                }
                break;
            case 2:
                if (footerFlag == false) {
                    var date = new Date();
                    var _id = date.getTime();
                    var template = '<div class="component footer" data-role="footer" id="' + _id + '"></div>';
                    $('.content').append(template);
                    var _data = {
                        "title": "Footer",
                        "id": _id
                    }
                    templateData.push(_data);
                    footerFlag = true;
                } else {
                    $('#error').modal({});
                }
                break;
            case 3:
                var date = new Date();
                var _id = date.getTime();
                var template = '<div class="resizable draggable component text-component" data-role="text" id="' + _id + '">\n' +
                    '<div class="editable">Double click to edit the text</div>\n' +
                    '</div>'
                var _data = {
                    "title": "Text",
                    "id": _id,
                }
                templateData.push(_data);
                $('.content').append(template);
                break;
            case 4:  // image add
                var date = new Date();
                var _id = date.getTime();
                var _imgId = 'img' + _id;
                var template = '<div class="draggable component image-component" data-role="image" id="' + _id + '" >\n' +
                    '<img class="resizable" src="http://www.google.com.br/images/srpr/logo3w.png" width="150px" id="img' + _id + '" height="100px">\n' +
                    '</div>';
                $('.content').append(template);
                var _data = {
                    "title": "Image",
                    "pid": _id,
                    "id": "img" + _id,
                }
                templateData.push(_data);
                break;
            case 5: // table draw
                $('#table-edit').modal({});
                break;
            case 6:
                var date = new Date();
                var _id = date.getTime();
                var template = '<div data-role="horizontal-line" class="resizable draggable component" id="' + _id + '" style="width: 100px"><hr id="line-hr" /></div>';
                $('.content').append(template);
                var _data = {
                    "title": "Line",
                    "id": _id,
                }
                templateData.push(_data);
                break;
            default:
                break;
        }
        control();
    }

    $('select').change(function () {
        var element = $(this).attr('id');
        var _id = "#" + focusId;
        switch (element) {
            case "text-font-size":
                var _value = $(this).val();
                $(_id + '>div').css('font-size', _value);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i]['id'] == focusId) {
                        templateData[i]['style'] = {...templateData[i]['style'], "font-size": _value};
                    }
                }
                break;
            case "line-style":
                $('#line-hr').css('border-top-style', $(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Line") {
                        templateData[i]['style'] = {...templateData[i]['style'], "border-top-style": $(this).val()};
                    }
                }
                break;
        }
    })

    $('.btn').click(function () {
        // $(document).on('click', '.btn', function () {
        var id = $(this).attr('id');
        // var focus_id = "#" + textFocus;
        switch (id) {
            case 'btn-prev':
                var templateId = $('#templateId').val();
                $.ajax({
                    url: '/save/',
                    type: "post",
                    data: {data: JSON.stringify(templateData), templateId: templateId},
                    success: function (data) {
                        if(data.message == 'success'){
                            window.open('/preview?templateId=' + templateId);
                        } else {
                            alert('error');
                        }

                    }
                })
                break;
            case "btn-save":
                $('#save').modal({});
                break;
            case "btn-download":
                alert('template downloaded');
                break;
            case 'btn-refresh':
                $(".content").empty();
                break;
            case 'confirm':
                $('#table-edit').modal('hide');
                var date = new Date();
                var _id = date.getTime();
                var template = '<div data-role="table" id="' + _id + '" class="table-content draggable component table-component">\n' +
                    '<table><tr>';
                var thead = "";
                _table_headerlist.forEach(function (item) {
                    var _table = '<th>' + item + '</th>';
                    thead += _table;
                })
                template += thead;
                template += '</tr><tr>\n' +
                    '<th colspan="' + (_table_headerlist.length + 1) + '">Double Click</th>\n' +
                    '</tr>';
                $('.content').append(template);
                var _data = {
                    "title": "Table",
                    "id": _id,
                    "field": _table_headerlist
                }
                templateData.push(_data);
                break;
            case "text-bold":
                var _id = "#" + focusId;
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('font-weight', "bold");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "font-weight": "bold"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('font-weight', "100");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], 'font-weight': "100"}
                        }
                    }
                }
                break;
            case "text-italic":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('font-style', "italic");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "font-style": "italic"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('font-style', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "font-style": "initial"};
                        }
                    }
                }
                break;
            case "text-underline":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-decoration', "underline");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-decoration": "underline"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-decoration', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-decoration": "initial"};
                        }
                    }
                }
                break;
            case "text-stright":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-decoration', "line-through");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-decoration": "line-through"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-decoration', "initial");
                    $("#" + focusId + '>div').css('text-decoration', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-decoration": "initial"};
                        }
                    }
                }
                break;
            case "text-align-center":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-align', "center");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "center"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-align', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "initial"};
                        }
                    }
                }
                break;
            case "text-align-justify":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-align', "justify");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "justify"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-align', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "initial"};
                        }
                    }
                }
                break;
            case "text-align-right":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-align', "right");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "right"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-align', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "initial"};
                        }
                    }
                }
                break;
            case "text-align-left":
                $(this).toggleClass('active');
                if ($(this).hasClass('active')) {
                    $("#" + focusId + '>div').css('text-align', "left");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "left"};
                        }
                    }
                } else {
                    $("#" + focusId + '>div').css('text-align', "initial");
                    for (var i = 0; i < templateData.length; i++) {
                        if (templateData[i]['id'] == focusId) {
                            templateData[i]['style'] = {...templateData[i]['style'], "text-align": "initial"};
                        }
                    }
                }
                break;
            default:
                break;
        }
        control();
    })
    $('input').change(function () {
        var element = $(this).attr('id');
        switch (element) {
            case "header-height":
                var _id = "#" + focusId;
                $(_id).height($(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Header") {
                        templateData[i]['size'] = {...templateData[i]['style'], "height": $(this).val()};
                    }
                }
                break;
            case "footer-height":
                var _id = "#" + focusId;
                $(_id).height($(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Footer") {
                        templateData[i]['size'] = {...templateData[i]['style'], "height": $(this).val()};
                    }
                }
                break;
            case "header-background":
                var _id = "#" + focusId;
                $(_id).css('background', $(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Header") {
                        templateData[i]['style'] = {...templateData[i]['style'], "backgroundColor": $(this).val()};
                    }
                }
                break;
            case "footer-background":
                var _id = "#" + focusId;
                $(_id).css('background', $(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Footer") {
                        templateData[i]['style'] = {...templateData[i]['style'], "backgroundColor": $(this).val()};
                    }
                }
                break;
            case "text-variable":
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i]['id'] == focusId) {
                        templateData[i]['variable'] = $(this).val();
                    }
                }
                break;
            case "text-position-x":
                var _id = "#" + focusId;
                var value = $(this).val() + "px";
                $(_id).css('left', value);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i]['id'] == focusId) {
                        templateData[i]['position'].left = $(this).val();
                    }
                }
                break;
            case "text-position-y":
                var _id = "#" + focusId;
                var value = $(this).val() + "px";
                $(_id).css('top', value);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i]['id'] == focusId) {
                        templateData[i]['position'].top = $(this).val();
                    }
                }
                break;
            case "text-color":
                var _id = "#" + focusId;
                $(_id).css('color', $(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i]['id'] == focusId) {
                        templateData[i]['style'] = {"color": $(this).val()};
                    }
                }
                break;
            case "image-src":
                if (focusId == "") {
                    $('#error-image').modal({});
                } else {
                    var img = this.files[0];
                    var formData = new FormData();
                    formData.append('file', this.files[0]);
                    $.ajax({
                        url: '/upload/',
                        type: 'POST',
                        data: formData,
                        processData: false,  // tell jQuery not to process the data
                        contentType: false,  // tell jQuery not to set contentType
                        success: function (data) {
                            $("#" + focusId + '>div>img').attr('src', window.location.origin + data.url);
                            for (var i = 0; i < templateData.length; i++) {
                                if (templateData[i]['pid'] == focusId) {
                                    templateData[i]['url'] = data.url;
                                }
                            }
                        }
                    });
                }
                break;
            case "line-height":
                var value = $(this).val() + "px"
                $("#line-hr").css('border-top-width', value);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Line") {
                        templateData[i]['style'] = {...templateData[i]['style'], "border-top-width": $(this).val()};
                    }
                }
                break;
            case "line-background":
                $("#line-hr").css('border-top-color', $(this).val());
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Line") {
                        templateData[i]['style'] = {...templateData[i]['style'], "border-top-color": $(this).val()};
                    }
                }
                break;
            default:
                break;
        }
    })

    // left side bar tooltip
    $(document).tooltip({
        position: {
            my: "center bottom-20",
            at: "left right",
            using: function (position, feedback) {
                $(this).css(position);
                $("<div>")
                    .addClass("arrow")
                    .addClass(feedback.vertical)
                    .addClass(feedback.horizontal)
                    .appendTo(this);
            }
        }
    });

    // resizable
    function control() {
        $('.editable').editable({
            emptyMessage: '<em>Please write something...</em>',
            callback: function (data) {
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title === "Text") {
                        templateData[i]['content'] = data.content;
                    }
                }
            }
        });

        $('.header').resizable({
            containment: '.content',
            handles: 's',
            resize: function (event, ui) {
                $('#header-height').val(ui.size.height);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title === "Header") {
                        templateData[i]['size'] = {
                            "height": ui.size.height.toFixed(2),
                            "width": ui.size.width.toFixed(2)
                        }
                    }
                }
            }
        })
        $('.footer').resizable({
            containment: '.content',
            handles: 'n',
            resize: function (event, ui) {
                $('#footer-height').val(ui.size.height);
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title === "Footer") {
                        templateData[i]['size'] = {
                            "height": ui.size.height.toFixed(2),
                            "width": ui.size.width.toFixed(2)
                        }
                    }
                }
            }
        })
        $('.table-content').resizable({
            containment: '.content',
            handles: 'e',
            resize: function(event, ui){
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title === "Table") {
                        templateData[i]['size'] = {
                            "height": ui.size.height.toFixed(2),
                            "width": ui.size.width.toFixed(2)
                        }
                    }
                }
            }
        })
        $(".resizable").resizable({
            containment: '.content',
            resize: function (event, ui) {
                var data_role = ui.element.context.getAttribute('data-role');
                for (var i = 0; i < templateData.length; i++) {
                    if (ui.element.context.tagName == "IMG") {
                        if (templateData[i].id == ui.element.context.getAttribute('id')) {
                            templateData[i]['size'] = {
                                "height": ui.size.height.toFixed(2),
                                "width": ui.size.width.toFixed(2)
                            }
                        }
                    } else {
                        if (templateData[i].id == ui.element.context.getAttribute('id')) {
                            templateData[i]['position'] = {
                                "left": ui.position.left,
                                "top": ui.position.top
                            }
                            templateData[i]['size'] = {
                                "height": ui.size.height.toFixed(2),
                                "width": ui.size.width.toFixed(2)
                            }
                        }
                    }
                }
            }
        });
        // draggable
        $('.draggable').draggable({
            containment: ".content",
            start: function () {
                var offset = $(this).position();
                var xPos = offset.left;
                var yPos = offset.top;
            },
            drag: function () {
                var offset = $(this).position();
                var xPos = offset.left;
                var yPos = offset.top;
                var data_role = $(this).data('role');
                var id = $(this).attr('id');
                switch (data_role) {
                    case "text":
                        $('#text-position-x').val(xPos.toFixed(2));
                        $('#text-position-y').val(yPos.toFixed(2));
                        for (var i = 0; i < templateData.length; i++) {
                            if (templateData[i].id == id) {
                                templateData[i]['position'] = {
                                    "left": xPos.toFixed(2),
                                    "top": yPos.toFixed(2)
                                }
                            }
                        }
                        break;
                    case "image":
                        $('#image-position-x').val(xPos.toFixed(2));
                        $('#image-position-y').val(yPos.toFixed(2));
                        for (var i = 0; i < templateData.length; i++) {
                            if (templateData[i].pid == id) {
                                templateData[i]['position'] = {
                                    "left": xPos.toFixed(2),
                                    "top": yPos.toFixed(2) + 15
                                }
                            }
                        }
                        break;
                    case "table":
                        for (var i = 0; i < templateData.length; i++) {
                            if (templateData[i].id == id) {
                                templateData[i]['position'] = {
                                    "left": xPos.toFixed(2),
                                    "top": yPos.toFixed(2)
                                }
                            }
                        }
                        break;
                    case "horizontal-line":
                        for (var i = 0; i < templateData.length; i++) {
                            if (templateData[i].id == id) {
                                templateData[i]['position'] = {
                                    "left": xPos.toFixed(2),
                                    "top": yPos.toFixed(2) + 15
                                }
                            }
                        }
                        break;

                    default:
                        break;
                }
            },
            stop: function () {
                var offset = $(this).position();
                var xPos = offset.left;
                var yPos = offset.top;
            }
        });
        //delete the html element using delete key
        $('div.component').on('click', function () {
            $('div.component').not($(this)).removeClass('ToDelete');
            $(this).addClass('ToDelete');
            focusId = $(this).attr('id');
            var data_role = $(this).data('role');
            switch (data_role) {
                case "header":
                    $('#header-panel').show();
                    $('#footer-panel').hide();
                    $('#text-panel').hide();
                    $('#image-panel').hide();
                    $('#line-horizontal-panel').hide();
                    break;
                case "footer":
                    $('#header-panel').hide();
                    $('#footer-panel').show();
                    $('#text-panel').hide();
                    $('#image-panel').hide();
                    $('#line-horizontal-panel').hide();
                    break;
                case "text":
                    $('#header-panel').hide();
                    $('#footer-panel').hide();
                    $('#text-panel').show();
                    $('#image-panel').hide();
                    $('#line-horizontal-panel').hide();
                    break;
                case "image":
                    $('#header-panel').hide();
                    $('#footer-panel').hide();
                    $('#text-panel').hide();
                    $('#image-panel').show();
                    $('#line-horizontal-panel').hide();
                    break;
                case "horizontal-line":
                    $('#header-panel').hide();
                    $('#footer-panel').hide();
                    $('#text-panel').hide();
                    $('#image-panel').hide();
                    $('#line-horizontal-panel').show();
                    break;
                default:
                    break;
            }
        })
        $(document).on('keyup', function (e) {
            if (e.which === 46) {
                var _id = "#" + focusId;
                var data_role = $(_id).data('role');
                if (data_role == 'header') {
                    headerFlag = false;
                } else if (data_role == 'footer') {
                    footerFlag = false;
                }
                for (var i = 0; i < templateData.length; i++) {
                    if (templateData[i].title == "Image") {
                        if (templateData[i].pid == focusId) {
                            templateData.splice(i, 1);
                        }
                    }
                    if (templateData[i].id == focusId) {
                        templateData.splice(i, 1);
                    }
                }
                $('div.ToDelete').remove();
            }
        });
    }

</script>

</body>

</html>